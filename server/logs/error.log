{"timestamp":"2025-06-13T17:52:41.321Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_WARDS","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T17:52:41.321Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/wards","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T17:53:08.513Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_WARDS","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T17:53:08.514Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/wards","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:12:51.741Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_WARDS","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:12:51.742Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/wards","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:14:50.475Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_WARDS","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:14:50.475Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/wards","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:20:58.984Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_WARDS","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:20:58.985Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/wards","stack":"Error: SQLITE_ERROR: no such table: wards\n--> in Database#all('SELECT w.id, w.name, w.description, w.is_active, w.created_at, w.updated_at,\\n' +\n  '              h.id as hospital_id, h.name as hospital_name\\n' +\n  '       FROM wards w\\n' +\n  '       LEFT JOIN hospitals h ON w.hospital_id = h.id\\n' +\n  '       ORDER BY h.name, w.name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:17:8\n    at new Promise (<anonymous>)\n    at Object.getAllWards (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:16:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/wards.js:21:35\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: wards"}
{"timestamp":"2025-06-13T18:20:58.985Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_HOSPITALS","stack":"Error: SQLITE_ERROR: no such table: hospitals\n--> in Database#all('SELECT id, name, address, created_at, updated_at\\n' +\n  '       FROM hospitals\\n' +\n  '       ORDER BY name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:222:8\n    at new Promise (<anonymous>)\n    at Object.getAllHospitals (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:221:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/hospitals.js:21:39\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-13T18:20:58.986Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/hospitals","stack":"Error: SQLITE_ERROR: no such table: hospitals\n--> in Database#all('SELECT id, name, address, created_at, updated_at\\n' +\n  '       FROM hospitals\\n' +\n  '       ORDER BY name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:222:8\n    at new Promise (<anonymous>)\n    at Object.getAllHospitals (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:221:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/hospitals.js:21:39\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-13T18:20:58.986Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"GET_ALL_HOSPITALS","stack":"Error: SQLITE_ERROR: no such table: hospitals\n--> in Database#all('SELECT id, name, address, created_at, updated_at\\n' +\n  '       FROM hospitals\\n' +\n  '       ORDER BY name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:222:8\n    at new Promise (<anonymous>)\n    at Object.getAllHospitals (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:221:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/hospitals.js:21:39\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-13T18:20:58.987Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/hospitals","stack":"Error: SQLITE_ERROR: no such table: hospitals\n--> in Database#all('SELECT id, name, address, created_at, updated_at\\n' +\n  '       FROM hospitals\\n' +\n  '       ORDER BY name', [], [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:222:8\n    at new Promise (<anonymous>)\n    at Object.getAllHospitals (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/ward.js:221:10)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/routes/hospitals.js:21:39\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/express/lib/router/index.js:284:15"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-13T18:21:21.333Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"action":"CREATE_HOSPITAL","hospitalData":{"name":"STDH","address":"harton"},"stack":"Error: SQLITE_ERROR: no such table: hospitals"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-13T18:21:21.333Z","level":"error","userId":1,"action":"ERROR","resource":"system","ip":"::1","success":true,"details":{"route":"/hospitals","action":"CREATE","stack":"Error: SQLITE_ERROR: no such table: hospitals"},"message":"Error: SQLITE_ERROR: no such table: hospitals"}
{"timestamp":"2025-06-18T19:50:49.285Z","level":"error","userId":"SYSTEM","action":"ERROR","resource":"system","ip":"internal","success":true,"details":{"type":"uncaughtException","stack":"TypeError: tableInfo.some is not a function\n    at Statement.<anonymous> (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/models/order.js:1339:27)\n    at Statement.replacement (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/sqlite3/lib/trace.js:25:27)\n    at Statement.replacement (/Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/node_modules/sqlite3/lib/trace.js:25:27)"},"message":"Error: tableInfo.some is not a function"}
{"timestamp":"2025-06-22T14:58:22.730Z","level":"error","userId":"system","action":"ERROR","resource":"system","ip":"internal","success":true,"details":{"action":"DATABASE_MIGRATION","migration":"add-cancellation-fields.sql","stack":"Error: SQLITE_ERROR: duplicate column name: cancelled_by\n--> in Database#exec('-- Add cancellation metadata fields to orders table\\n' +\n  '-- This migration adds columns to track who cancelled an order and why\\n' +\n  '\\n' +\n  '-- Add cancelled_by, cancellation_reason, and cancelled_at columns to orders table\\n' +\n  'ALTER TABLE orders ADD COLUMN cancelled_by TEXT;\\n' +\n  'ALTER TABLE orders ADD COLUMN cancellation_reason TEXT;\\n' +\n  'ALTER TABLE orders ADD COLUMN cancelled_at TEXT;\\n' +\n  '\\n' +\n  '-- Create index for faster lookups of cancelled orders\\n' +\n  'CREATE INDEX IF NOT EXISTS idx_orders_cancelled ON orders(status, cancelled_at);\\n', [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/db/run-migration.js:69:10\n    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read/context:68:3)"},"message":"Error: SQLITE_ERROR: duplicate column name: cancelled_by"}
{"timestamp":"2025-06-22T14:58:22.738Z","level":"error","userId":"system","action":"ERROR","resource":"system","ip":"internal","success":true,"details":{"action":"DATABASE_MIGRATION","migration":"add-dose-to-order-medications.sql","stack":"Error: SQLITE_ERROR: duplicate column name: dose\n--> in Database#exec('-- Add dose column to order_medications table\\n' +\n  '-- This migration adds a dose field to store medication dosage information\\n' +\n  '\\n' +\n  '-- Note: The migration framework should handle duplicate column errors gracefully\\n' +\n  \"-- since SQLite doesn't support IF NOT EXISTS for ALTER TABLE ADD COLUMN\\n\" +\n  '\\n' +\n  'ALTER TABLE order_medications ADD COLUMN dose TEXT;\\n', [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/db/run-migration.js:69:10\n    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read/context:68:3)"},"message":"Error: SQLITE_ERROR: duplicate column name: dose"}
{"timestamp":"2025-06-22T14:58:22.745Z","level":"error","userId":"system","action":"ERROR","resource":"system","ip":"internal","success":true,"details":{"action":"DATABASE_MIGRATION","migration":"add-supply-group-id.sql","stack":"Error: SQLITE_ERROR: duplicate column name: supply_group_id\n--> in Database#exec('-- Migration: Add supply_group_id to orders table\\n' +\n  '-- This migration adds a column to reference supply groups in pharmacy orders\\n' +\n  '\\n' +\n  '-- Add supply_group_id column to orders table with foreign key reference\\n' +\n  'ALTER TABLE orders ADD COLUMN supply_group_id TEXT;\\n' +\n  '\\n' +\n  '-- Add index for performance on supply_group_id lookups\\n' +\n  'CREATE INDEX IF NOT EXISTS idx_orders_supply_group_id ON orders(supply_group_id);\\n' +\n  '\\n' +\n  '-- Update the version\\n' +\n  'PRAGMA user_version = (SELECT user_version FROM pragma_user_version) + 1;\\n', [Function (anonymous)])\n    at /Users/nicholaslawson/Desktop/Dispensing software/uk-pharmacy-labels/server/db/run-migration.js:69:10\n    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read/context:68:3)"},"message":"Error: SQLITE_ERROR: duplicate column name: supply_group_id"}
